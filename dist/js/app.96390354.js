(function(t){function e(e){for(var s,r,i=e[0],c=e[1],l=e[2],d=0,h=[];d<i.length;d++)r=i[d],o[r]&&h.push(o[r][0]),o[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(h.length)h.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,i=1;i<a.length;i++){var c=a[i];0!==o[c]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},o={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"48fc":function(t,e,a){"use strict";var s=a("9126"),o=a.n(s);o.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),o=a("9f7b"),n=(a("f9e3"),a("2dd8"),a("8c4f")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},i=[],c=a("2877"),l={},u=Object(c["a"])(l,r,i,!1,null,null,null),d=u.exports,h=a("2f62"),m=a("f499"),p=a.n(m),f=a("bc3a"),b=a.n(f),k={SHOPS_LIST:"https://shopsring-f4fyh309m.now.sh/db.json",GEOCODER_SERVICE:"https://api.opencagedata.com/geocode/v1/json?q=",GEOCODER_SERVICE_KEY:"224e8e01cf8f43a0aabb1b68341904a1",GOOGLE_MAPS:"https://www.google.com/maps/dir/",JAKDOJADE:"https://jakdojade.pl/"},S=function(t,e,a){var s=function(t){return t*Math.PI/180},o=function(t,e,a,o){var n=6371,r=a-t,i=s(r),c=o-e,l=s(c),u=Math.sin(i/2)*Math.sin(i/2)+Math.cos(s(t))*Math.cos(s(a))*Math.sin(l/2)*Math.sin(l/2),d=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u));return Math.round(n*d*1e3)},n=a.filter(function(a){return a.distance=o(a.lat,a.lon,t.lat,t.lon),a.distance<e}),r=n.map(function(e){var a=k.JAKDOJADE;return a+="".concat(t.city,"/trasa/?fn="),a+=encodeURI("".concat(t.street," ").concat(t.streetNumber)),a+="&tn=",a+=encodeURI(e.address),a+="&tc=",a+="".concat(e.lat,":").concat(e.lon),a+="&fc=",a+="".concat(t.lat,":").concat(t.lon),a+="&ft=LOCATION_TYPE_ADDRESS&tt=LOCATION_TYPE_ADDRESS&d=",a+="".concat((new Date).getDate(),".").concat((new Date).getMonth()+1,".").concat((new Date).getFullYear()-2e3),a+="&h=",a+="".concat((new Date).getHours(),":").concat((new Date).getMinutes()),a+="&aro=1&t=1&rc=3&ri=1&r=0&stopsLayer=true",e.jakd="<a href=".concat(a,' target="_blank">jakDojade</a>'),e}),i=r.map(function(e){var a=k.GOOGLE_MAPS;return a+=encodeURI("".concat(t.street,"+").concat(t.streetNumber,"+").concat(t.city)),a+="/",a+=encodeURI("".concat(e.address," ").concat(e.city)),e.gmaps="<a href=".concat(a,' target="_blank">GMaps</a>'),e});return i},g=function(t){sessionStorage.getItem("allShops")?t.commit("ADD_ALL_SHOPS",JSON.parse(sessionStorage.getItem("allShops"))):b.a.get(k.SHOPS_LIST).then(function(e){t.commit("ADD_ALL_SHOPS",e.data),sessionStorage.setItem("allShops",p()(e.data))}).catch(function(t){return console.log(t)})},v=function(t,e){var a=e.homeData,s=e.radius,o=e.allShops,n=k.GEOCODER_SERVICE_KEY,r=encodeURI(a.street+" "+a.streetNumber+", "+a.city),i=k.GEOCODER_SERVICE+r+"&key="+n+"&language=pl&pretty=1";function c(e){var a=S(e,s,o);t.commit("FIND_SELECTED_SHOPS",a),t.commit("SHOW_LOADER",!1),t.commit("SHOW_TABLE",!0)}if(sessionStorage.getItem("homeGPSAndAddress")){var l=JSON.parse(sessionStorage.getItem("homeGPSAndAddress"));if(l.city===a.city&&l.street===a.street&&l.streetNumber===a.streetNumber)return setTimeout(function(){t.commit("SHOW_LOADER",!1)},0),c(JSON.parse(sessionStorage.getItem("homeGPSAndAddress")))}b.a.get(i).then(function(e){if(e.data.results[0].confidence<9)return t.commit("SHOW_LOADER",!1),alert("Nie ma takiej ulicy. Spróbuj jeszcze raz"),t.commit("FIND_SELECTED_SHOPS",[]);var n={lat:e.data.results[0].geometry.lat,lon:e.data.results[0].geometry.lng,city:a.city,street:a.street,streetNumber:a.streetNumber};sessionStorage.setItem("homeGPSAndAddress",p()(n)),c(n,s,o)}).catch(function(t){return console.log("My error: ",t)})},y=["index",{key:"shopName",label:"Sklep",sortable:!0},{key:"address",label:"Adres",sortable:!0},{key:"distance",label:"Odległość",sortable:!0},{key:"jakd",label:"JakD"},{key:"gmaps",label:"Gmaps"}],_=[{key:"total",label:"Razem",sortable:!0}],w=[{text:"Chleb",value:"chleb"},{text:"Masło",value:"maslo"},{text:"Ser",value:"ser"},{text:"Śmietana",value:"smietana"},{text:"Jajka",value:"jajka"},{text:"Mleko",value:"mleko"},{text:"Szynka",value:"szynka"},{text:"Kiełbasa",value:"kielbasa"},{text:"Cukier",value:"cukier"},{text:"Woda",value:"woda"}];s["a"].use(h["a"]);var j=new h["a"].Store({state:{allShops:[],allShopsCopy:[],selectedShops:[],items:[],fields:[],stocksSelected:[],showTable:!1,loading:!1},getters:{getAllShops:function(t){return t.allShops},getAllShopsCopy:function(t){return t.allShopsCopy},getSelectedShops:function(t){return t.selectedShops},getStock:function(t){return t.fields},getStocksSelected:function(t){return t.stocksSelected},getShowTable:function(t){return t.showTable},getLoading:function(t){return t.loading}},mutations:{ADD_ALL_SHOPS:function(t,e){t.allShops=e,t.allShopsCopy=e},FIND_SELECTED_SHOPS:function(t,e){e.length||(t.stocksSelected=[]),t.selectedShops=e},GET_STOCK:function(t,e){e.stocksSelected.length?t.fields=y.concat(_).concat(e.stocksSelected):t.fields=y.concat(e.stocksSelected),t.stocksSelected=e.stocksSelected},TOGGLE_CHECKBOXES:function(t){t.stocksSelected=[]},SHOW_TABLE:function(t,e){t.fields=y,t.showTable=e},SHOW_LOADER:function(t,e){t.loading=e}},actions:{addAllShops:function(t){g(t)},findSelectedShops:function(t,e){var a=e.homeData,s=e.radius,o=e.allShops;v(t,{homeData:a,radius:s,allShops:o})},getStock:function(t,e){t.commit("GET_STOCK",{initialColumns:y,stocksSelected:e})},addTotal:function(t,e){t.commit("ADD_ALL_SHOPS",e)},toggleCheckboxes:function(t){t.commit("TOGGLE_CHECKBOXES")},showTable:function(t,e){t.commit("SHOW_TABLE",e)},showLoader:function(t,e){t.commit("SHOW_LOADER",e)}}}),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("search-bar"),a("stock-selector"),a("shops-table")],1)},z=[],E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",[s("b-row",{staticClass:"my-2"},[s("span",[s("img",{attrs:{src:a("e1f9"),title:"logo"}}),s("router-link",{staticClass:"mx-3",attrs:{to:"/about","active-class":"active"}},[s("a",{attrs:{id:"linkabout"}},[t._v("Pomoc")])])],1)]),s("b-row",{staticClass:"mb-3"},[s("b-col",{staticClass:"mr-1 px-0",attrs:{md:"2"}},[s("b-form-select",{attrs:{id:"city","data-test":"city","aria-label":"city",options:t.cities},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})],1),s("b-modal",{ref:"modalCity",attrs:{"data-test":"modalCity","hide-footer":""}},[s("div",{staticClass:"d-block text-center"},[s("h3",[t._v("Brak miasta")])]),s("b-btn",{staticClass:"mt-3",attrs:{variant:"success",block:""},on:{click:t.hideModalCity}},[t._v("Zamknij")])],1),s("b-col",{staticClass:"mx-0 px-1",attrs:{md:"2"}},[s("b-form-input",{attrs:{id:"street","data-test":"street","aria-label":"street",placeholder:"Ulica"},model:{value:t.street,callback:function(e){t.street=e},expression:"street"}})],1),s("b-modal",{ref:"modalStreet",attrs:{"data-test":"modalStreet","hide-footer":""}},[s("div",{staticClass:"d-block text-center"},[s("h3",[t._v("Brak ulicy")])]),s("b-btn",{staticClass:"mt-3",attrs:{variant:"success",block:""},on:{click:t.hideModalStreet}},[t._v("Zamknij")])],1),s("b-col",{staticClass:"mx-0 px-1",attrs:{md:"2"}},[s("b-form-input",{attrs:{id:"streetNumber","data-test":"streetNumber","aria-label":"streetNumber",placeholder:"Nr domu"},model:{value:t.streetNumber,callback:function(e){t.streetNumber=e},expression:"streetNumber"}})],1),s("b-col",{staticClass:"ml-0 px-1",attrs:{md:"2"}},[s("b-form-input",{attrs:{id:"radius","data-test":"radius","aria-label":"radius",placeholder:"Promień (m)",type:"number",min:"100",start:"600",step:"100"},model:{value:t.radius,callback:function(e){t.radius=t._n(e)},expression:"radius"}})],1),s("b-modal",{ref:"modalRadius",attrs:{"hide-footer":""}},[s("div",{staticClass:"d-block text-center"},[s("h3",[t._v("Brak promienia")])]),s("b-btn",{staticClass:"mt-3",attrs:{variant:"success",block:""},on:{click:t.hideModalRadius}},[t._v("Zamknij")])],1),s("b-col",[s("b-button",{staticClass:"ml-2 px-3",attrs:{id:"search","data-test":"buttonSearch",size:"md"},on:{click:t.search}},[t._v("\n          Szukaj\n        ")]),s("b-button",{staticClass:"ml-3 px-3",attrs:{id:"reset","data-test":"buttonResetLocation",size:"md"},on:{click:t.reset}},[t._v("\n          Wyczyść\n        ")])],1),s("b-col",{staticClass:"px-0",attrs:{md:"1"}},[t.loading?s("span",[t._v('/ title="spinner">')]):t._e()])],1)],1)],1)},C=[],x={data:function(){return{city:"",street:"",streetNumber:"",radius:"",cities:[{text:"Warszawa",value:"warszawa"},{text:"Kraków",value:"krakow"},{text:"Gdańsk",value:"gdansk"}],showAlert:!1}},computed:{loading:function(){return this.$store.getters.getLoading}},created:function(){if(sessionStorage.getItem("homeData")){var t=JSON.parse(sessionStorage.getItem("homeData"));this.city=t.city,this.street=t.street,this.streetNumber=t.streetNumber}},methods:{search:function(){if(!this.city)return this.$refs.modalCity.show();if(!this.street)return this.$refs.modalStreet.show();if(!this.radius)return this.$refs.modalRadius.show();this.$store.dispatch("addAllShops");var t={city:this.city,street:this.street,streetNumber:this.streetNumber};sessionStorage.setItem("homeData",p()(t));var e=this.radius,a=this.$store.getters.getAllShops,s=this.$store.getters.getStocksSelected;this.$store.dispatch("findSelectedShops",{homeData:t,radius:e,allShops:a}),this.$store.dispatch("showLoader",!0),this.$store.dispatch("getStock",s);var o=this.$store.getters.getSelectedShops;this.$store.dispatch("addTotal",o)},hideModalCity:function(){this.$refs.modalCity.hide()},hideModalStreet:function(){this.$refs.modalStreet.hide()},hideModalRadius:function(){this.$refs.modalRadius.hide()},reset:function(){this.city="",this.street="",this.streetNumber="",this.radius=500,this.$store.dispatch("toggleCheckboxes"),this.$store.dispatch("showTable",!1)}}},D=x,A=Object(c["a"])(D,E,C,!1,null,null,null),T=A.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("b-container",{attrs:{fluid:""}},[a("b-row",{},[t.showTable()?a("b-table",{attrs:{id:"stockTable","data-test":"stockTable",striped:"",hover:"",bordered:"",items:t.items,fields:t.fields},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v(t._s(e.index+1))]}},{key:"google",fn:function(e){return a("span",{domProps:{innerHTML:t._s(e.value)}},[t._v(t._s(e.value))])}},{key:"jakd",fn:function(e){return a("span",{domProps:{innerHTML:t._s(e.value)}},[t._v(t._s(e.value))])}},{key:"gmaps",fn:function(e){return a("span",{domProps:{innerHTML:t._s(e.value)}},[t._v(t._s(e.value))])}}])}):t._e()],1)],1)],1)},M=[],$={computed:{items:function(){return this.$store.getters.getSelectedShops},fields:function(){return this.$store.getters.getStock},loading:function(){return this.$store.getters.getLoading}},created:function(){this.$store.dispatch("addAllShops")},methods:{showTable:function(){return this.$store.getters.getShowTable}}},P=$,N=(a("48fc"),Object(c["a"])(P,L,M,!1,null,null,null)),R=N.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-container",[a("b-row",{staticClass:"mb-2"},[t.show?a("b-form-row",{staticClass:"mt-2"},[a("b-form-checkbox-group",{staticClass:"align-middle",attrs:{"data-test":"stocks","aria-label":"options",options:t.options},on:{change:t.stockSelected},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1):t._e(),a("b-button",{staticClass:"px-3 py-2",attrs:{"data-test":"buttonResetStock",size:"md"},on:{click:t.resetStock}},[t._v("\n        Kasuj\n      ")])],1)],1)],1)},H=[],G=(a("ac6a"),{data:function(){return{selected:[],options:w,show:!0}},methods:{resetStock:function(){this.selected=[],this.$store.dispatch("getStock",[])},stockSelected:function(){var t=this;setTimeout(function(){var e=0;t.$store.dispatch("getStock",t.selected);var a=t.$store.getters.getSelectedShops,s=t.$store.getters.getStocksSelected;a.forEach(function(t){s.forEach(function(a){return e+=t[a]}),t.total=e,e=0}),t.$store.dispatch("addTotal",a)},0)}}}),J=G,K=(a("6283"),Object(c["a"])(J,I,H,!1,null,"1fb574a0",null)),W=K.exports,B={components:{"stock-selector":W,"search-bar":T,"shops-table":R}},U=B,Y=Object(c["a"])(U,O,z,!1,null,null,null),F=Y.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-container",[a("b-row",{staticClass:"my-3"},[a("b-col",{attrs:{md:"9","offset-md":"1"}},[a("router-link",{attrs:{to:"/","active-class":"active"}},[a("a",{attrs:{id:"link_home"}},[t._v("Home")])]),a("h4",[t._v("Instrukcja obsługi")])],1)],1),a("b-row",{staticClass:"my-3"},[a("b-col",{attrs:{md:"10","offset-md":"1"}},[a("h5",[t._v("1. Do czego służy ta aplikacja? ")]),a("p",[t._v("     Aplikacja pozwala porównać ceny wybranych towarów w określonej\n          przez przez użytkownika      odległości od wybranego miejsca\n          (np. domu / pracy)")]),a("h5",[t._v("2. Od czego zacząć ? ")]),a("p",[t._v("     Wybierz lub wpisz swoją lokalizację do pól: miasto, ulicę,\n          (opcjonalnie) numer domu i odległość,     po czym wciśnij przycisk Search.\n          Po chwili otrzymasz listę sklepów spełniających te warunki sklepów ")]),a("h5",[t._v("3. Co dalej ? ")]),a("p",[t._v("     Klikaj w czekboksy odpowiadające nazwom towarów których ceną jesteś\n          zainteresowana."),a("br"),t._v("     Po każdym kliknieciu dla każdego ze sklepów\n          ukaże się kolumna z ceną wybranego towaru i z sumą\n               cen wszystkich towarów wybranych dotychczas\n        ")]),a("h5",[t._v("4. Jak skasować wybrane towary ? ")]),a("p",[t._v("     Możesz pojedyńczo klikać w czekboksy, lub nacisnąc umieszczony nad nimi\n          przycisk 'Reset'")]),a("h5",[t._v("5. Jak zmienić pola lokalizacji ?")]),a("p",[t._v("     Możesz edytować poszczególne pola, lub wyczyścić je wszystkie wciskając\n          przycisk 'Reset'      umieszczony za przyciskiem 'Search'")]),a("h5",[t._v("6. Jak posortować sklepy wg ich odległości od mojej lokalizacji ?")]),a("p",[t._v("     Przyciśnij umieszczoną za nazwą 'Odległość', ikonkę dwu strzałek.\n          Ponowne przyciśnięcie"),a("br"),t._v("     sortuje w odwrotnym kierunku ")]),a("h5",[t._v("7. Jak dojechać do wybranego sklepu komunikacją miejską ?")]),a("p",[t._v("     Kliknij w odpowiadającą wybranemu sklepowi linkę 'jakDojade'")]),a("h5",[t._v("8. Jak dojechać do wybranego sklepu samochodem lub dojść ?")]),a("p",[t._v("     Kliknij w odpowiadającą wybranemu sklepowi linkę 'GMaps'")])])],1)],1)],1)},q=[],Z=(a("d045"),{}),X=Object(c["a"])(Z,V,q,!1,null,"74f3bba5",null),Q=X.exports,tt=[{path:"",component:F},{path:"/about",component:Q},{path:"*",component:F}];s["a"].use(o["a"]),s["a"].use(n["a"]);var et=new n["a"]({routes:tt,mode:"history"}),at=new s["a"]({store:j,router:et,render:function(t){return t(d)}});at.$mount("#app")},6283:function(t,e,a){"use strict";var s=a("6990"),o=a.n(s);o.a},6990:function(t,e,a){},9126:function(t,e,a){},"9f5a":function(t,e,a){},d045:function(t,e,a){"use strict";var s=a("9f5a"),o=a.n(s);o.a},e1f9:function(t,e,a){t.exports=a.p+"img/red_pepper_transparent_siopo_65x65.a0847506.png"}});
//# sourceMappingURL=app.96390354.js.map